# ğŸ“˜ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ø¨Ú©â€ŒØ¢Ù¾ Ùˆ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨
1. [Ù…Ø¹Ø±ÙÛŒ](#Ù…Ø¹Ø±ÙÛŒ)
2. [Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² CLI](#Ø§Ø³ØªÙØ§Ø¯Ù‡-Ø§Ø²-cli)
3. [Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ù†Ù„ ÙˆØ¨](#Ø§Ø³ØªÙØ§Ø¯Ù‡-Ø§Ø²-Ù¾Ù†Ù„-ÙˆØ¨)
4. [Ø¨Ú©â€ŒØ¢Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø±](#Ø¨Ú©-Ø¢Ù¾-Ø®ÙˆØ¯Ú©Ø§Ø±)
5. [ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ](#ØªÙˆØµÛŒÙ‡-Ù‡Ø§ÛŒ-Ø§Ù…Ù†ÛŒØªÛŒ)

---

## ğŸ¯ Ù…Ø¹Ø±ÙÛŒ

Ø³ÛŒØ³ØªÙ… Ø¨Ú©â€ŒØ¢Ù¾ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Tankha/ZDR Ø§Ù…Ú©Ø§Ù†Ø§Øª Ú©Ø§Ù…Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ØŒ Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

### ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§:
- âœ… Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾ Ø§Ø² Ø·Ø±ÛŒÙ‚ CLI Ùˆ Ù¾Ù†Ù„ ÙˆØ¨
- âœ… Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¨Ú©â€ŒØ¢Ù¾ Ø¨Ø§ Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ
- âœ… Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ú©â€ŒØ¢Ù¾
- âœ… Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ú©â€ŒØ¢Ù¾ Ø®Ø§Ø±Ø¬ÛŒ
- âœ… Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ (30+ Ø±ÙˆØ²)
- âœ… Ù†Ù…Ø§ÛŒØ´ Ø­Ø¬Ù… Ùˆ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ
- âœ… Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù…Ø¯Ø±Ù† Ùˆ ÙØ§Ø±Ø³ÛŒ
- âœ… Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ø¨Ù‡ Superadmin

---

## ğŸ’» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² CLI (Command Line)

### 1ï¸âƒ£ Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾ Ø¬Ø¯ÛŒØ¯

#### Ø¨Ú©â€ŒØ¢Ù¾ Ø¨Ø§ Ù†Ø§Ù… Ø®ÙˆØ¯Ú©Ø§Ø± (ØªØ§Ø±ÛŒØ®â€ŒØ¯Ø§Ø±):
```bash
php artisan db:backup
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù†Ù…ÙˆÙ†Ù‡:**
```
ğŸ”„ Starting database backup...
âœ… Backup created successfully!
+----------+------------------------------------------------------------------+
| Property | Value                                                            |
+----------+------------------------------------------------------------------+
| File     | backup_2025-10-29_10-52-37.sql                                   |
| Size     | 78.17 KB                                                         |
| Path     | /var/www/zdr/storage/app/backups/database/backup_2025-10-29_...  |
| Database | laradashboard                                                    |
| Time     | 2025-10-29 10:52:37                                              |
+----------+------------------------------------------------------------------+
```

#### Ø¨Ú©â€ŒØ¢Ù¾ Ø¨Ø§ Ù†Ø§Ù… Ø³ÙØ§Ø±Ø´ÛŒ:
```bash
php artisan db:backup --name=before_migration
```

**Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:**
- Ù‚Ø¨Ù„ Ø§Ø² migration: `--name=before_migration_v2.0`
- Ù‚Ø¨Ù„ Ø§Ø² Ø¢Ù¾Ø¯ÛŒØª: `--name=before_update_$(date +%Y%m%d)`
- Ø¨Ú©â€ŒØ¢Ù¾ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ: `--name=daily_backup`

---

### 2ï¸âƒ£ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¨Ú©â€ŒØ¢Ù¾

#### Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ (Interactive):
```bash
php artisan db:restore
```

**Ø®Ø±ÙˆØ¬ÛŒ:**
```
ğŸ“‹ Available backups:
+---+----------------------------------+----------+---------------------+
| # | File                             | Size     | Date                |
+---+----------------------------------+----------+---------------------+
| 1 | backup_2025-10-29_10-52-37.sql   | 78.17 KB | 2025-10-29 10:52:37 |
| 2 | before_migration.sql             | 75.23 KB | 2025-10-28 14:30:15 |
+---+----------------------------------+----------+---------------------+

Enter backup number to restore (or filename): 1

âš ï¸  WARNING: This will replace all current database data!
Are you sure you want to restore this backup? (yes/no) [no]:
> yes

ğŸ”„ Restoring database...
âœ… Database restored successfully!
ğŸ”„ Clearing application cache...
```

#### Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… (Ø¨Ø§ Ù†Ø§Ù… ÙØ§ÛŒÙ„):
```bash
php artisan db:restore backup_2025-10-29_10-52-37.sql
```

âš ï¸ **Ù‡Ø´Ø¯Ø§Ø±:** Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¨Ú©â€ŒØ¢Ù¾ ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ Ø±Ø§ Ù¾Ø§Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯!

---

## ğŸŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ù†Ù„ ÙˆØ¨

### Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾Ù†Ù„:
```
https://yourdomain.com/admin/database-backup
```

**Ø´Ø±Ø· Ø¯Ø³ØªØ±Ø³ÛŒ:** ÙÙ‚Ø· Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø§ Ù†Ù‚Ø´ **Superadmin**

---

### Ø§Ù…Ú©Ø§Ù†Ø§Øª Ù¾Ù†Ù„ ÙˆØ¨:

#### 1ï¸âƒ£ Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾ Ø¬Ø¯ÛŒØ¯
1. Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ **"Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾ Ø¬Ø¯ÛŒØ¯"** (Ø³Ø¨Ø² Ø±Ù†Ú¯)
2. Ø¨Ú©â€ŒØ¢Ù¾ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯
3. ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ Ø¯Ø± Ù„ÛŒØ³Øª Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯

#### 2ï¸âƒ£ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨Ú©â€ŒØ¢Ù¾
1. Ø¯Ø± Ù„ÛŒØ³Øª Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ **"Ø¯Ø§Ù†Ù„ÙˆØ¯"** (Ø¢Ø¨ÛŒ) Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
2. ÙØ§ÛŒÙ„ `.sql` Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯
3. ÙØ§ÛŒÙ„ Ø±Ø§ Ø¯Ø± Ù…Ú©Ø§Ù† Ø§Ù…Ù† Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯

#### 3ï¸âƒ£ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¨Ú©â€ŒØ¢Ù¾
1. Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ **"Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ"** (Ø³Ø¨Ø²) Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
2. Ù¾ÛŒØ§Ù… Ù‡Ø´Ø¯Ø§Ø± Ø±Ø§ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ù†ÛŒØ¯:
   ```
   âš ï¸ Ù‡Ø´Ø¯Ø§Ø±: Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø±Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ø¯!
   Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ
   ```
3. Ø±ÙˆÛŒ **OK** Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
4. ØµÙØ­Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± reload Ù…ÛŒâ€ŒØ´ÙˆØ¯

#### 4ï¸âƒ£ Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ Ø¨Ú©â€ŒØ¢Ù¾
1. Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ **"Ø¢Ù¾Ù„ÙˆØ¯ Ø¨Ú©â€ŒØ¢Ù¾"** (Ø¢Ø¨ÛŒ)
2. ÙØ§ÛŒÙ„ `.sql` Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
3. Ø±ÙˆÛŒ **Ø¢Ù¾Ù„ÙˆØ¯** Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
4. ÙØ§ÛŒÙ„ Ø¯Ø± Ù„ÛŒØ³Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯

**Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§:**
- ÙØ±Ù…Øª: ÙÙ‚Ø· `.sql`
- Ø­Ø¯Ø§Ú©Ø«Ø± Ø­Ø¬Ù…: 500 MB

#### 5ï¸âƒ£ Ø­Ø°Ù Ø¨Ú©â€ŒØ¢Ù¾
1. Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ **"Ø­Ø°Ù"** (Ù‚Ø±Ù…Ø²) Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
2. ØªØ§ÛŒÛŒØ¯ Ú©Ù†ÛŒØ¯
3. ÙØ§ÛŒÙ„ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø§Ø¦Ù…ÛŒ Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

## â° Ø¨Ú©â€ŒØ¢Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø±

### 1ï¸âƒ£ Ø¨Ú©â€ŒØ¢Ù¾ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¨Ø§ Cron

#### Ù†ØµØ¨ Cron Job:
```bash
# ÙˆÛŒØ±Ø§ÛŒØ´ crontab
crontab -e
```

#### Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ú©â€ŒØ¢Ù¾ Ø±ÙˆØ²Ø§Ù†Ù‡ (Ø³Ø§Ø¹Øª 2 Ø¨Ø§Ù…Ø¯Ø§Ø¯):
```bash
0 2 * * * cd /var/www/zdr && php artisan db:backup --name=daily_$(date +\%Y\%m\%d) >> /var/www/zdr/storage/logs/backup.log 2>&1
```

#### Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ú©â€ŒØ¢Ù¾ Ù‡ÙØªÚ¯ÛŒ (ÛŒÚ©Ø´Ù†Ø¨Ù‡ Ø³Ø§Ø¹Øª 3 Ø¨Ø§Ù…Ø¯Ø§Ø¯):
```bash
0 3 * * 0 cd /var/www/zdr && php artisan db:backup --name=weekly_$(date +\%Y\%m\%d) >> /var/www/zdr/storage/logs/backup.log 2>&1
```

#### Ø­Ø°Ù Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø§Ø² 30 Ø±ÙˆØ²:
```bash
0 4 * * * find /var/www/zdr/storage/app/backups/database -name "*.sql" -mtime +30 -delete
```

#### Ù†Ù…ÙˆÙ†Ù‡ crontab Ú©Ø§Ù…Ù„:
```bash
# Ø¨Ú©â€ŒØ¢Ù¾ Ø±ÙˆØ²Ø§Ù†Ù‡
0 2 * * * cd /var/www/zdr && php artisan db:backup --name=daily_$(date +\%Y\%m\%d) >> /var/www/zdr/storage/logs/backup.log 2>&1

# Ø¨Ú©â€ŒØ¢Ù¾ Ù‡ÙØªÚ¯ÛŒ
0 3 * * 0 cd /var/www/zdr && php artisan db:backup --name=weekly_$(date +\%Y\%m\%d) >> /var/www/zdr/storage/logs/backup.log 2>&1

# Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
0 4 * * * find /var/www/zdr/storage/app/backups/database -name "*.sql" -mtime +30 -delete

# Ù„Ø§Ú¯ cron
0 5 * * * echo "Backup cron executed at $(date)" >> /var/www/zdr/storage/logs/backup.log
```

---

### 2ï¸âƒ£ Ø¨Ú©â€ŒØ¢Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø§ Laravel Scheduler

#### ÙˆÛŒØ±Ø§ÛŒØ´ `app/Console/Kernel.php`:
```php
protected function schedule(Schedule $schedule)
{
    // Ø¨Ú©â€ŒØ¢Ù¾ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø³Ø§Ø¹Øª 2 Ø¨Ø§Ù…Ø¯Ø§Ø¯
    $schedule->command('db:backup', ['--name' => 'daily_' . date('Ymd')])
             ->dailyAt('02:00')
             ->timezone('Asia/Tehran');

    // Ø¨Ú©â€ŒØ¢Ù¾ Ù‡ÙØªÚ¯ÛŒ
    $schedule->command('db:backup', ['--name' => 'weekly_' . date('Ymd')])
             ->weekly()
             ->sundays()
             ->at('03:00')
             ->timezone('Asia/Tehran');
}
```

**Ù†Ú©ØªÙ‡:** Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ú©Ù‡ Cron Ø¨Ø±Ø§ÛŒ Laravel Scheduler ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡ Ø§Ø³Øª:
```bash
* * * * * cd /var/www/zdr && php artisan schedule:run >> /dev/null 2>&1
```

---

## ğŸ” ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ

### 1ï¸âƒ£ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ø³Ø±ÙˆØ±

Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù† Ø®Ø§Ø±Ø¬ Ø§Ø² Ø³Ø±ÙˆØ± Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯:

#### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² rsync:
```bash
# Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ø³Ø±ÙˆØ± Ø¨Ú©â€ŒØ¢Ù¾
rsync -avz /var/www/zdr/storage/app/backups/database/ \
    user@backup-server:/backups/tankha/database/
```

#### Ø¢Ù¾Ù„ÙˆØ¯ Ø¨Ù‡ Cloud Storage:
```bash
# AWS S3
aws s3 sync /var/www/zdr/storage/app/backups/database/ \
    s3://your-bucket/backups/database/

# Google Cloud Storage
gsutil rsync -r /var/www/zdr/storage/app/backups/database/ \
    gs://your-bucket/backups/database/
```

---

### 2ï¸âƒ£ Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ú©â€ŒØ¢Ù¾

#### Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ Ø¨Ø§ GPG:
```bash
# Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ
gpg --symmetric --cipher-algo AES256 backup_2025-10-29.sql

# Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ
gpg --decrypt backup_2025-10-29.sql.gpg > backup_2025-10-29.sql
```

#### Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø± Cron:
```bash
0 2 * * * cd /var/www/zdr && \
    php artisan db:backup --name=daily_$(date +\%Y\%m\%d) && \
    gpg --batch --yes --passphrase "YourStrongPassword" --symmetric --cipher-algo AES256 \
    storage/app/backups/database/daily_$(date +\%Y\%m\%d).sql
```

---

### 3ï¸âƒ£ Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§

```bash
# Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾ÙˆØ´Ù‡ Ø¨Ú©â€ŒØ¢Ù¾
chmod 700 /var/www/zdr/storage/app/backups/database
chown www-data:www-data /var/www/zdr/storage/app/backups/database

# Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ú©â€ŒØ¢Ù¾
chmod 600 /var/www/zdr/storage/app/backups/database/*.sql
```

---

### 4ï¸âƒ£ ØªØ³Øª Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ

Ø­ØªÙ…Ø§Ù‹ Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ØªØ³Øª Ú©Ù†ÛŒØ¯:

```bash
# 1. Ø§ÛŒØ¬Ø§Ø¯ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ØªØ³Øª
mysql -u root -p -e "CREATE DATABASE tankha_test;"

# 2. Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¨Ú©â€ŒØ¢Ù¾ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ØªØ³Øª
mysql -u root -p tankha_test < storage/app/backups/database/backup_2025-10-29.sql

# 3. Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø¯Ø§ÙˆÙ„
mysql -u root -p tankha_test -e "SHOW TABLES;"

# 4. Ø­Ø°Ù Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ØªØ³Øª
mysql -u root -p -e "DROP DATABASE tankha_test;"
```

---

### 5ï¸âƒ£ Ù†Ø¸Ø§Ø±Øª Ùˆ Alert

Ø§ÛŒØ¬Ø§Ø¯ script Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ø¨Ú©â€ŒØ¢Ù¾:

```bash
#!/bin/bash
# /usr/local/bin/check-backup.sh

BACKUP_DIR="/var/www/zdr/storage/app/backups/database"
LAST_BACKUP=$(ls -t $BACKUP_DIR/*.sql | head -1)
LAST_BACKUP_TIME=$(stat -c %Y "$LAST_BACKUP")
CURRENT_TIME=$(date +%s)
DIFF=$((($CURRENT_TIME - $LAST_BACKUP_TIME) / 3600))

if [ $DIFF -gt 48 ]; then
    echo "âš ï¸ Warning: Last backup is $DIFF hours old!" | mail -s "Backup Alert" admin@yourdomain.com
fi
```

Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Cron:
```bash
0 6 * * * /usr/local/bin/check-backup.sh
```

---

## ğŸ“Š Ù…Ø¯ÛŒØ±ÛŒØª ÙØ¶Ø§ÛŒ Ø¯ÛŒØ³Ú©

### Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø¬Ù… Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§:
```bash
# Ø­Ø¬Ù… Ú©Ù„ Ù¾ÙˆØ´Ù‡ Ø¨Ú©â€ŒØ¢Ù¾
du -sh /var/www/zdr/storage/app/backups/database

# Ø­Ø¬Ù… Ù‡Ø± ÙØ§ÛŒÙ„
du -h /var/www/zdr/storage/app/backups/database/*.sql | sort -h

# ØªØ¹Ø¯Ø§Ø¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
ls -1 /var/www/zdr/storage/app/backups/database/*.sql | wc -l
```

### ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§:
```bash
# ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÛŒÚ© ÙØ§ÛŒÙ„
gzip backup_2025-10-29.sql

# ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªÙ…Ø§Ù… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
gzip /var/www/zdr/storage/app/backups/database/*.sql

# Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ
gunzip backup_2025-10-29.sql.gz
```

---

## ğŸ†˜ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ Ù…Ø´Ú©Ù„Ø§Øª

### Ø®Ø·Ø§: Permission Denied
```bash
# ØªÙ†Ø¸ÛŒÙ… Ù…Ø¬ÙˆØ²Ù‡Ø§
sudo chown -R www-data:www-data /var/www/zdr/storage/app/backups
sudo chmod -R 775 /var/www/zdr/storage/app/backups
```

### Ø®Ø·Ø§: mysqldump not found
```bash
# Ù†ØµØ¨ MySQL client
sudo apt install mysql-client
```

### Ø®Ø·Ø§: Access denied for user
```bash
# Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¯Ø± .env
cat /var/www/zdr/.env | grep DB_

# ØªØ³Øª Ø§ØªØµØ§Ù„
mysql -u DB_USERNAME -p -e "SHOW DATABASES;"
```

### Ø®Ø·Ø§: Table doesn't exist after restore
```bash
# Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¨Ø§ force
mysql -u DB_USERNAME -p --force DB_DATABASE < backup.sql
```

---

## ğŸ“ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø¨Ú©â€ŒØ¢Ù¾

- [ ] Ø¨Ú©â€ŒØ¢Ù¾ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡
- [ ] Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ Ø¯Ø± Ù…Ú©Ø§Ù† Ø®Ø§Ø±Ø¬ Ø§Ø² Ø³Ø±ÙˆØ± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- [ ] ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ú©â€ŒØ¢Ù¾ Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
- [ ] Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¨Ú©â€ŒØ¢Ù¾ Ø­Ø¯Ø§Ù‚Ù„ Ù…Ø§Ù‡ÛŒ ÛŒÚ©Ø¨Ø§Ø± ØªØ³Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯
- [ ] Alert Ø¨Ø±Ø§ÛŒ Ø´Ú©Ø³Øª Ø¨Ú©â€ŒØ¢Ù¾ ÙØ¹Ø§Ù„ Ø§Ø³Øª
- [ ] Ø¨Ú©â€ŒØ¢Ù¾â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- [ ] Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ø§Ø³Øª (700/600)
- [ ] ÙØ¶Ø§ÛŒ Ø¯ÛŒØ³Ú© Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ù†Ø¸Ù… Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ù…Ø´Ú©Ù„:

1. **Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§:**
   ```bash
   tail -100 /var/www/zdr/storage/logs/laravel.log
   ```

2. **GitHub Issues:**
   https://github.com/separkala-ui/tankha/issues

3. **ØªØ³Øª Ø¯Ø³ØªÛŒ:**
   ```bash
   # ØªØ³Øª mysqldump
   mysqldump --version
   
   # ØªØ³Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
   php artisan tinker
   DB::connection()->getPdo();
   ```

---

**Ù†Ø³Ø®Ù‡: 1.0**  
**ØªØ§Ø±ÛŒØ®: Ø§Ú©ØªØ¨Ø± 2025**  
**Ù…Ø®ØµÙˆØµ: Tankha/ZDR Project**

