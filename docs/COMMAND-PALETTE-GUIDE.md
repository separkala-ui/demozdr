# ⌨️ Command Palette - راهنمای استفاده

جستجوی سریع و دسترسی آسان به تمام بخش‌های سیستم با **Ctrl+K** یا **⌘+K**

---

## 🚀 ویژگی‌ها

- ✅ **جستجوی سریع** در تمام بخش‌های سیستم
- ✅ **Keyboard Navigation** کامل (Arrow Up/Down, Enter, ESC)
- ✅ **Permission-Aware** - فقط بخش‌هایی که دسترسی دارید
- ✅ **Smart Search** - جستجو به فارسی و انگلیسی
- ✅ **Category Based** - دسته‌بندی نتایج
- ✅ **Shortcuts** - میانبرهای صفحه کلید
- ✅ **Beautiful UI** - طراحی زیبا و مدرن
- ✅ **RTL Support** - کاملاً راست به چپ

---

## ⌨️ میانبرهای صفحه‌کلید

| میانبر | عملکرد |
|--------|---------|
| `Ctrl+K` یا `⌘+K` | باز کردن Command Palette |
| `↑` `↓` | حرکت بین نتایج |
| `Enter` | باز کردن مورد انتخابی |
| `ESC` | بستن |

---

## 🔍 نحوه استفاده

### 1️⃣ باز کردن:
- **Windows/Linux:** `Ctrl+K`
- **Mac:** `⌘+K` (Command+K)

### 2️⃣ جستجو:
تایپ کنید - جستجو خودکار شروع می‌شود:
- **فارسی:** "کاربر"، "تنخواه"، "تنظیمات"
- **انگلیسی:** "user"، "cash"، "settings"

### 3️⃣ انتخاب:
- **Mouse:** کلیک روی مورد
- **Keyboard:** `↑` `↓` برای حرکت، `Enter` برای انتخاب

---

## 📋 بخش‌های قابل دسترسی

### 👥 مدیریت کاربران
- **کاربر** → مدیریت کاربران
- **کاربر جدید** → افزودن کاربر
- **نقش** → مدیریت نقش‌ها
- **دسترسی** → مدیریت دسترسی‌ها

### 💰 مالی
- **تنخواه** → داشبورد تنخواه (میانبر: `P`)
- **تراکنش** → ثبت تراکنش جدید

### 📁 محتوا
- **مدیا** → کتابخانه رسانه (میانبر: `M`)

### ⚙️ سیستم
- **تنظیمات** → تنظیمات سیستم (میانبر: `,`)
- **گزارش** → گزارش فعالیت‌ها

### 🛠️ ابزارها (فقط Admin)
- **Telescope** → مانیتورینگ
- **Pulse** → Performance
- **کش** → پاک‌سازی Cache

---

## 🎯 جستجوی هوشمند

### مثال‌ها:

```
"کاربر" → 
  - مدیریت کاربران
  - افزودن کاربر جدید

"user" →
  - مدیریت کاربران
  - افزودن کاربر جدید

"تنخواه" →
  - داشبورد تنخواه
  - ثبت تراکنش

"cash" →
  - داشبورد تنخواه
  - ثبت تراکنش

"log" →
  - گزارش فعالیت‌ها

"telescope" →
  - Laravel Telescope
```

---

## 💡 نکات مهم

### 1. جستجوی خالی:
اگر چیزی تایپ نکنید، **8 مورد پرکاربرد** نمایش داده می‌شود.

### 2. دسترسی:
فقط بخش‌هایی نمایش داده می‌شود که **کاربر دسترسی دارد**.

### 3. میانبرها:
برخی بخش‌ها میانبر دارند (مثل `P` برای تنخواه)

### 4. دسته‌بندی:
نتایج بر اساس **Category** دسته‌بندی شده‌اند:
- 👥 مدیریت
- 💰 مالی
- 📁 محتوا
- ⚙️ سیستم
- 🛠️ ابزار
- 📊 گزارش

---

## 🎨 ظاهر

### حالت‌های مختلف:

#### ✅ Selected (انتخاب شده):
- پس‌زمینه آبی روشن
- آیکون آبی
- متن برجسته

#### ⬜ Normal:
- پس‌زمینه سفید
- Hover: خاکستری روشن

---

## 🔧 توسعه و سفارشی‌سازی

### افزودن Command جدید:

```php
// در CommandPalette.php → loadResults()

if ($this->matches($search, 'کلمات کلیدی|keywords')) {
    $commands[] = [
        'title' => __('عنوان'),
        'description' => __('توضیحات'),
        'icon' => 'lucide:icon-name',
        'url' => route('route.name'),
        'category' => __('دسته'),
        'shortcut' => 'X',  // اختیاری
    ];
}
```

### تغییر طراحی:

**رنگ Selected State:**
```blade
{{-- در command-palette.blade.php --}}
{{ $selectedIndex === $index ? 'bg-purple-50' : 'hover:bg-slate-50' }}
```

**تغییر حداکثر ارتفاع:**
```blade
<div class="max-h-96 overflow-y-auto">
     ↓
<div class="max-h-[600px] overflow-y-auto">
```

---

## 🧪 تست

### تست دستی:

1. ✅ **باز شدن:** `Ctrl+K` باید Modal را باز کند
2. ✅ **جستجو:** تایپ "کاربر" → نتایج مرتبط نمایش داده شود
3. ✅ **Keyboard:** `↑` `↓` `Enter` کار کند
4. ✅ **Permission:** فقط موارد مجاز نمایش داده شود
5. ✅ **RTL:** متن‌ها راست به چپ باشند
6. ✅ **Responsive:** در موبایل درست کار کند
7. ✅ **ESC:** با ESC بسته شود

### جستجوی نمونه:

```bash
# جستجوها برای تست:
- "کاربر"
- "user"
- "تنخواه"  
- "cash"
- "تنظیمات"
- "settings"
- "telescope"
- "log"
```

---

## 🐛 Troubleshooting

### Command Palette باز نمی‌شود:
1. ✅ مطمئن شوید `@livewire('command-palette')` در layout اضافه شده
2. ✅ Cache را پاک کنید: `php artisan optimize:clear`
3. ✅ Alpine.js بارگذاری شده باشد
4. ✅ Browser Console را چک کنید

### نتایج نمایش داده نمی‌شود:
1. ✅ مطمئن شوید کاربر **دسترسی** دارد
2. ✅ Route ها موجود باشند
3. ✅ جستجو را به فارسی و انگلیسی امتحان کنید

### Keyboard Navigation کار نمی‌کند:
1. ✅ مطمئن شوید Input در Focus است
2. ✅ JavaScript errors نباشد
3. ✅ Alpine.js درست کار می‌کند

---

## 🎯 Best Practices

### 1. Keyword Selection:
کلمات کلیدی **واضح** و **رایج** انتخاب کنید:
```php
// ✅ Good
$this->matches($search, 'کاربر|user|users')

// ❌ Bad
$this->matches($search, 'usr|u')
```

### 2. Description:
توضیحات **مختصر** و **مفید** بنویسید:
```php
// ✅ Good
'description' => __('مشاهده و مدیریت کاربران سیستم')

// ❌ Bad
'description' => __('کاربر')
```

### 3. Icons:
از آیکون‌های **مناسب** استفاده کنید:
```php
'icon' => 'lucide:users'      // برای کاربران
'icon' => 'lucide:wallet'     // برای مالی
'icon' => 'lucide:settings'   // برای تنظیمات
```

### 4. Categories:
دسته‌بندی **منطقی** داشته باشید:
- مدیریت → Users, Roles, Permissions
- مالی → تنخواه، تراکنش
- محتوا → مدیا، پست‌ها
- سیستم → تنظیمات، لاگ

---

## 📊 Performance

- **Search Debounce:** 300ms
- **Max Results:** نامحدود (اما در جستجوی خالی: 8)
- **Loading Time:** < 100ms
- **Bundle Size:** ~5KB

---

## 🔮 آینده

### ویژگی‌های پیشنهادی:

1. **Recent Commands** - آخرین جستجوها
2. **Favorites** - ذخیره موارد پرکاربرد
3. **Actions** - اجرای عملیات مستقیم (بدون Redirect)
4. **Smart Suggestions** - پیشنهاد بر اساس رفتار کاربر
5. **Search History** - تاریخچه جستجو

---

## 🎓 منابع

**الهام گرفته از:**
- [Linear](https://linear.app)
- [Raycast](https://raycast.com)
- [GitHub Command Palette](https://github.com)
- [Vercel Command Menu](https://vercel.com)

---

**نسخه:** 1.0.0  
**تاریخ:** 26 آبان 1404  
**وضعیت:** ✅ آماده استفاده

---

**باز کردن:** `Ctrl+K` یا `⌘+K`  
**بستن:** `ESC`  
**جستجو:** فقط شروع به تایپ کنید! 🚀

