# راهنمای نصب سریع ZDR به کمک اسکریپت

این راهنما توضیح می‌دهد چگونه مخزن پروژه را تنها با یک دستور آماده‌ی اجرا کنید. اسکریپت نصب به‌طور خودکار وابستگی‌ها را نصب، دیتابیس را مهاجرت و دارایی‌های فرانت‌اند را بیلد می‌کند.

## پیش‌نیازها

پیش از اجرا، موارد زیر باید روی سیستم (یا CI) نصب شده باشند:

- **PHP 8.2** به بالا به‌همراه افزونه‌های `mbstring`, `openssl`, `pdo_mysql`, `intl`, `gd`, `fileinfo`
- **Composer 2**
- **Node.js 18** یا بالاتر و **npm 9** یا بالاتر
- **MySQL / MariaDB** (یا دیتابیس سازگار) و دسترسی به یک دیتابیس خالی
- ابزارهای استاندارد خط فرمان لینوکس (bash، git و …)

> اگر قصد بیلد فرانت‌اند را ندارید (مثلاً در محیطی بدون Node.js) کافیست هنگام اجرا از گزینه `--no-build` استفاده کنید.

## مراحل نصب

1. مخزن را کلون کنید:

   ```bash
   git clone https://github.com/<ORGANIZATION>/<REPO>.git zdr
   cd zdr
   ```

2. اسکریپت نصب را اجرا کنید:

   ```bash
   ./scripts/install.sh --seed
   ```

   - `--seed` (اختیاری) باعث اجرای `php artisan db:seed` پس از مهاجرت دیتابیس می‌شود.
   - برای صرف‌نظر از نصب و بیلد فرانت‌اند از `--no-build` استفاده کنید.

3. پس از پایان اسکریپت:

   - فایل `.env` به‌صورت خودکار از `.env.example` ساخته می‌شود. مقادیر دیتابیس، سرویس‌های جانبی و کلیدهای API را مطابق محیط خود تنظیم کنید.
   - در صورت نیاز دستورهای زیر را اجرا کنید:

     ```bash
     php artisan serve
     # یا اگر از وب‌سرور استفاده می‌کنید سرویس مربوطه را راه‌اندازی کنید
     ```

## گزینه‌ها و سناریوهای متداول

| گزینه اسکریپت | توضیح |
| --- | --- |
| `./scripts/install.sh` | نصب استاندارد بدون seeding |
| `./scripts/install.sh --seed` | نصب + اجرای Seeder ها |
| `./scripts/install.sh --no-build` | نصب بدون `npm install` و `npm run build` (مناسب سرورهای بدون Node.js) |
| `./scripts/install.sh --help` | نمایش راهنمای خط فرمان |

## نکات تکمیلی

- اسکریپت در هر مرحله خطاهای رایج (نبودن Composer، PHP یا npm) را بررسی می‌کند و در صورت نبود هرکدام پیغام مناسبی می‌دهد.
- برای اجرای مجدد اسکریپت، ابتدا از صحت فایل `.env` و دسترسی دیتابیس مطمئن شوید. اسکریپت فایل `.env` موجود را بازنویسی نمی‌کند.
- پس از بیلد، دارایی‌های فرانت‌اند در `public/build` قرار می‌گیرند؛ در تنظیمات وب‌سرور خود به این نکته توجه کنید.

در صورت نیاز به سفارشی‌سازی بیشتر (مانند تعریف queue worker یا job های زمان‌بندی‌شده) به مستندات اصلی پروژه مراجعه کنید. همچنین می‌توانید پیشنهادها یا مشکلات احتمالی خود را از طریق issue در گیت‌هاب مطرح کنید.
