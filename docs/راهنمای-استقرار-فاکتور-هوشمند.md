# ุฑุงูููุง ุงุณุชูุฑุงุฑ ู ูพุดุชุจุงู ูุงฺฉุชูุฑ ููุดููุฏ (ูพุดุฑูุชู)

ุงู ุณูุฏ ุจุฑุง ุชูโูุง ูู ููุดุชู ุดุฏู ุชุง ุจุชูุงููุฏ ุงูุฒูููู ยซูุงฺฉุชูุฑ ููุดููุฏ ุชูุฎูุงูยป ุฑุง ุฑู ูุฑ ุณุฑูุฑ ูุตุจุ ูฺฏูุฏุงุฑ ู ุฏุฑ ุตูุฑุช ูุงุฒ ุจุงุฒุงุจ ฺฉููุฏ. ุชูุงู ูุฑุงุญู ุจู ุตูุฑุช ฺฏุงูโุจูโฺฏุงู ู ุจุง ุฐฺฉุฑ ูุฑูุงูโูุง ุขูุฑุฏู ุดุฏู ุงุณุช.

---

## ฑ. ูพุดโูุงุฒูุง ูุฑูโุงูุฒุงุฑ ุณุฑูุฑ

- **ุณุณุชูโุนุงูู ูพุดููุงุฏ:** Ubuntu 22.04 LTS ุง ูุฑ ุชูุฒุน ูููฺฉุณ ูุนุงุฏู.
- **ูุจโุณุฑูุฑ:** Nginx ุง Apache (ูุซุงูโูุง ุจุฑ ุงุณุงุณ Nginx ููุดุชู ุดุฏู ุงุณุช).
- **ูุณุฎูโูุง:**
  - PHP 8.2 ุจู ููุฑุงู ุงูุฒูููโูุง `pdo_mysql`, `mbstring`, `bcmath`, `intl`, `gd`, `zip`.
  - Composer 2.x
  - Node.js 18.x (ุฏุฑ ุตูุฑุช ูุงุฒ ุจู build ูุฑุงูุชโุงูุฏ)
  - Python 3.10+
  - MySQL 8 ุง PostgreSQL 14 (ุจู ุงูุชุฎุงุจ ุดูุง)
- **ฺฉุชุงุจุฎุงููโูุง ุณุณุชู ุจุฑุง OCR:** `ffmpeg`, `libsm6`, `libxext6`

```bash
sudo apt update && sudo apt install -y nginx mysql-server php8.2-fpm php8.2-cli \
    php8.2-bcmath php8.2-gd php8.2-intl php8.2-mbstring php8.2-xml php8.2-zip \
    composer nodejs npm python3 python3-venv ffmpeg libsm6 libxext6
```

---

## ฒ. ูุตุจ ุง ุงูุชูุงู ูพุฑูฺู ุจู ุณุฑูุฑ ุชุงุฒู

1. **ุณุงุฎุช ูุณุฑ ูพุฑูฺู:**
   ```bash
   sudo mkdir -p /var/www/zdr
   sudo chown -R $USER:$USER /var/www/zdr
   ```
2. **ุงูุชูุงู ุณูุฑุณ:**
   - ุฑูุด Git:
     ```bash
     cd /var/www
     git clone git@your-repo.git zdr
     cd zdr
     git checkout main
     ```
   - ุฑูุด ุขุฑุดู: ูุงู zip/tar ุฑุง ุจู `/var/www` ููุชูู ู ุงุณุชุฎุฑุงุฌ ฺฉูุฏ.
3. **ูุงุจุณุชฺฏโูุง PHP ู JS:**
   ```bash
   cd /var/www/zdr
   composer install --no-dev --optimize-autoloader
   npm ci && npm run build   # ุฏุฑ ุตูุฑุช ูุงุฒ
   ```
4. **ุชูุธู ูุงู ูุญุท:**
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```
   ุณูพุณ `SMART_INVOICE_SERVICE_URL`ุ ุงุทูุงุนุงุช ูพุงฺฏุงูโุฏุงุฏู ู ุฏุงููู ุฑุง ุฏุฑ `.env` ู ุตูุญูู ุชูุธูุงุช ูุงุฑุฏ ฺฉูุฏ.
5. **ุณุงุฎุช ูพุงฺฏุงูโุฏุงุฏู ู ุงุฌุฑุง ูุงฺฏุฑุดู:**
   ```bash
   php artisan migrate --force
   php artisan db:seed --class=PermissionSeeder   # ุฏุฑ ุตูุฑุช ูุงุฒ
   ```
6. **ุงุนูุงู ุฏุณุชุฑุณโูุง:**
   ```bash
   sudo chown -R www-data:www-data storage bootstrap/cache
   sudo chmod -R 775 storage bootstrap/cache
   ```

---

## ณ. ุฑุงูโุงูุฏุงุฒ ุณุฑูุณ ูพุงุชูู (OCR ู ููุด ูุตููุน)

1. **ุณุงุฎุช ูุญุท ูุฌุงุฒ:**
   ```bash
   python3 -m venv /opt/pettycash-ai
   source /opt/pettycash-ai/bin/activate
   ```
2. **ูุตุจ ูุงุจุณุชฺฏโูุง:**
   ```bash
   pip install -r /var/www/zdr/python/pettycash_ai/requirements.txt
   ```
3. **ุงุฌุฑุง ุฏุณุช ุจุฑุง ุชุณุช:**
   ```bash
   uvicorn python.pettycash_ai.main:app --host 0.0.0.0 --port 8000
   ```
4. **ุงุฌุงุฏ ุณุฑูุณ systemd (ุงุฎุชุงุฑ):**
   ```ini
   # /etc/systemd/system/pettycash-ai.service
   [Unit]
   Description=PettyCash Smart Invoice API
   After=network.target

   [Service]
   User=www-data
   Group=www-data
   WorkingDirectory=/var/www/zdr
   Environment="PATH=/opt/pettycash-ai/bin"
   ExecStart=/opt/pettycash-ai/bin/uvicorn python.pettycash_ai.main:app --host 0.0.0.0 --port 8000
   Restart=on-failure

   [Install]
   WantedBy=multi-user.target
   ```
   ุณูพุณ:
   ```bash
   sudo systemctl daemon-reload
   sudo systemctl enable --now pettycash-ai
   ```

---

## ด. ุชูุธูุงุช ุฏุงุฎู ุฏุงุดุจูุฑุฏ (ุจุฑุง ุณููพุฑุงุฏูู)

1. ุจู ูุณุฑ **ุชูุธูุงุช โ ูุงฺฉุชูุฑ ููุดููุฏ** ุจุฑูุฏ.
2. ููุฏุงุฑูุง ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   - ุขุฏุฑุณ ุณุฑูุณ ูพุงุชูู (ูุซูุงู `http://127.0.0.1:8000`) **ุชูุฌู:** ุงูุชูุง ุขุฏุฑุณ ุฑุง ุจุฏูู `/extract` ูุงุฑุฏ ฺฉูุฏุ ุณุงูุงูู ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ูุณุฑ `extract/` ุฑุง ุงุถุงูู ูโฺฉูุฏ.
   - ุฒูุงู Timeout (ูพุดููุงุฏ: ถฐ ุซุงูู)
   - ุชูฺฉู ุฏุณุชุฑุณ (ุฏุฑ ุตูุฑุช ูุงุฒ)
   - ูุนุงู ุง ุบุฑูุนุงู ุจูุฏู ุฐุฎุฑูู ุชุญููโูุง
3. ุชุบุฑุงุช ุฑุง ุฐุฎุฑู ู ุจุง ุฏฺฉููู ยซุชุดุฎุต ููุดููุฏ ูุงฺฉุชูุฑยป ฺฉ ุฑุฏู ุขุฒูุงุด ุงุฌุงุฏ ฺฉูุฏ.

---

## ต. ุณูุงุฑู ููุงุฌุฑุช ุจู ุณุฑูุฑ ุฌุฏุฏ

1. **ุจฺฉโุขูพ ุงุฒ ุณุฑูุฑ ูุนู:**
   - ุฎุฑูุฌ ุฏุชุงุจุณ (mysqldump ุง pg_dump)
   - ุขุฑุดู ุงุฒ ูพูุดูู `storage/app` ู `storage/app/public`
   - ุฏุฑ ุตูุฑุช ูุฒููุ ูุงูโูุง ฺฉุงููฺฏ ุดุฎุตโุณุงุฒโุดุฏู
2. **ฺฉูพ ุจฺฉโุขูพ ุจู ุณุฑูุฑ ุฌุฏุฏ** (ุจุง `scp` ุง S3).
3. **ุท ูุฑุงุญู ุจุฎุด ฒ ู ณ** ุจุฑุง ุขูุงุฏูโุณุงุฒ ุณุฑูุฑ ุฌุฏุฏ.
4. **ูุงุฑุฏ ฺฉุฑุฏู ุฏุชุงุจุณ ู ูุงูโูุง:**
   ```bash
   mysql -u USER -p DATABASE < backup.sql
   unzip storage-backup.zip -d /var/www/zdr/storage
   ```
5. **ูพุงฺฉโุณุงุฒ ฺฉุดโูุง:**
   ```bash
   php artisan migrate --force
   php artisan config:clear
   php artisan cache:clear
   php artisan route:clear
   ```
6. **ุขุฒูุงุด ููุง** ู ุณูพุณ ุชุบุฑ DNS ุง Nginx.

---

## ถ. ุจุงุฒฺฏุฑุฏุงู ุจฺฉโุขูพ ูุฑุญููโุจูโูุฑุญูู (Disaster Recovery)

1. **ุจุฑุฑุณ ุณูุงูุช ุจฺฉโุขูพ** ุจุง ุชุทุจู ูุด ู ุชุงุฑุฎ ุงุฌุงุฏ.
2. **ุฎุงููุด ฺฉุฑุฏู ุจุฑูุงูู** ุง ูุฑุงุฑ ุฏุงุฏู ุณุงุช ุฏุฑ ุญุงูุช ูฺฏูุฏุงุฑ:
   ```bash
   php artisan down --render="errors::503"
   ```
3. **ุจุงุฒฺฏุฑุฏุงู ูุงูโูุง** ุทุจู ุฏุณุชูุฑุงูุนูู ุจุฎุด ต (ฺฏุงู ด).
4. **ุจุงุฒฺฏุฑุฏุงู ูพุงฺฏุงูโุฏุงุฏู** ุจุง ูุฑูุงูโูุง `mysql` ุง `psql`.
5. **ุจุงุฒุณุงุฒ ฺฉุด ู ุงูุฏฺฉุณโูุง:**
   ```bash
   php artisan optimize
   php artisan queue:restart   # ุงฺฏุฑ ุงุฒ ุตู ุงุณุชูุงุฏู ูโฺฉูุฏ
   ```
6. **ุจุงูุง ุขูุฑุฏู ุจุฑูุงูู:**
   ```bash
   php artisan up
   ```
7. **ฺฉูุชุฑู ฺฉูุช:** ุจุฑุฑุณ ุชุฑุงฺฉูุดโูุง ุขุฎุฑุ ุชุณุช ฺฏุฒุงุฑุด ฺุงูพุ ุจุฑุฑุณ ุงุชุตุงู ุณุฑูุณ ูพุงุชูู.
8. **ุญุฐู ูุงูโูุง ูููุช ุจฺฉโุขูพ** ูพุณ ุงุฒ ุงุทููุงู ุงุฒ ููููุช ุนููุงุช.

---

## ท. ูฺฉุงุช ูฺฏูุฏุงุดุช ู ูุงูุชูุฑูฺฏ

- **ูุงฺฏโูุง:** ูุฑ ฺฏููู ุฎุทุง OCR ุง ุงุฑุชุจุงุท ุฏุฑ `storage/logs/laravel.log` ู `/var/log/syslog` (ุจุฑุง systemd) ุซุจุช ูโุดูุฏ.
- **ูุงูุชูุฑูฺฏ ุณูุงูุช:** ูพุดููุงุฏ ูโุดูุฏ ุจุฑุง URL `/extract` ฺฉ ฺฺฉ ุฑุจุงุชฺฉ ุฏูุฑูโุง (Health Check) ุชุนุฑู ุดูุฏ.
- **ุจูโุฑูุฒุฑุณุงู ูุงุจุณุชฺฏโูุง:** ุจู ุตูุฑุช ุฏูุฑูโุง (ูุซูุงู ูุตู) ุฏุณุชูุฑ `pip install --upgrade -r requirements.txt` ู `composer update` (ุฏุฑ ูุญุท Stage) ุงุฌุฑุง ู ูพุณ ุงุฒ ุชุณุช ุจู ูุญุท ุงุตู ููุชูู ุดูุฏ.
- **ุงููุช:** ุฏุฑ ุตูุฑุช ุงูุชุดุงุฑ ุณุฑูุณ ูพุงุชูู ุฑู ุดุจฺฉูู ุนููู ุญุชูุงู:
  - ูุญุฏูุฏุณุงุฒ IP ุจุง ูุงุฑูุงู
  - ูุนุงูโุณุงุฒ HTTPS ุงุฒ ุทุฑู Nginx reverse proxy
  - ุงุณุชูุงุฏู ุงุฒ ุชูฺฉู ุง Basic Auth

---

## ธ. ุนุจโุงุจ ุฑุงุฌ

| ูพุงู ุฎุทุง | ุนูุช ุงุญุชูุงู | ุฑุงูโุญู |
| --- | --- | --- |
| `EasyOCR is not installed. Please pip install easyocr or configure SMART_INVOICE_OCR_ENDPOINT.` | ุจุณุชูู EasyOCR ุฏุฑ ูุญุท ูุฌุงุฒ ูพุงุชูู ูุตุจ ูุดุฏู ุง ููฺฏุงู ุจูโุฑูุฒุฑุณุงู ูพุงฺฉ ุดุฏู ุงุณุช. | ูุงุฑุฏ ูุญุท ูุฌุงุฒ ุดูุฏ:<br>`source /opt/pettycash-ai/bin/activate`<br>ุณูพุณ ุฏุณุชูุฑ `pip install easyocr opencv-python` ุฑุง ุงุฌุฑุง ู ุณุฑูุณ ุฑุง ุฑโุงุณุชุงุฑุช ฺฉูุฏ (`systemctl restart pettycash-ai` ุง ุงุฌุฑุง ูุฌุฏุฏ uvicorn). |
| `SMART_INVOICE_SERVICE_URL is not defined` | ุขุฏุฑุณ ุณุฑูุณ ุฏุฑ ุชูุธูุงุช ุฐุฎุฑู ูุดุฏู ุงุณุช. | ุฏุฑ ุฏุงุดุจูุฑุฏ โ ุชูุธูุงุช โ ูุงฺฉุชูุฑ ููุดููุฏุ ููุฏุงุฑ URL (ูุซูุงู `http://127.0.0.1:8000`) ุฑุง ุซุจุช ู ุฐุฎุฑู ฺฉูุฏ. |
| `Connection refused` ุง `Failed to establish a new connection` | ุณุฑูุณ ูพุงุชูู ุฑูุดู ูุณุช ุง ูพูุฑุช ูุงุฑูุงู ูุณุฏูุฏ ุงุณุช. | ูุถุนุช ุณุฑูุณ ุฑุง ุจุฑุฑุณ ฺฉูุฏ (`systemctl status pettycash-ai`) ู ุฏุฑ ุตูุฑุช ุฎุงููุด ุจูุฏู ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏ. ุงุทููุงู ุญุงุตู ฺฉูุฏ ูพูุฑุช ุฏุฑ ูุงุฑูุงู ุจุงุฒ ุจุงุดุฏ (`ufw allow 8000/tcp`). |
| `Request timed out after 45s` | ูพุฑุฏุงุฒุด OCR ุทููุงู ุดุฏู ุง ููุงุจุน ุณุฑูุฑ ฺฉุงู ูุณุช. | ููุฏุงุฑ ุฒูุงู ุงูุชุธุงุฑ ุฑุง ุฏุฑ ุชุจ ุชูุธูุงุช ุฑู ถฐ ุง นฐ ุซุงูู ุจฺฏุฐุงุฑุฏุ ููุงุจุน CPU/RAM ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู ู ุฏุฑ ุตูุฑุช ูุงุฒ ุณุฑูุณ ุฑุง ุฑู ุณุฑูุฑ ููโุชุฑ ุง ุจุง GPU ุงุฌุฑุง ฺฉูุฏ. |

> ูพุณ ุงุฒ ูุตุจ ูุฑ ูพฺฉุฌ ุฌุฏุฏ ุฏุฑ ูุญุท ูุฌุงุฒุ uvicorn ุง ุณุฑูุณ systemd ุฑุง ุฑโุงุณุชุงุฑุช ฺฉูุฏ ุชุง ุชุบุฑุงุช ุงุนูุงู ุดูุฏ.

---

## ธ. ฺฺฉโูุณุช ฺฉูุชุงู ูุตุจ (ุจุฑุง ฺุงูพ ู ููุฑุงู ุฏุงุดุชู ุฏุฑ ูุญู)

1. ุขูุงุฏูโุณุงุฒ ูพุดโูุงุฒูุง ุณุณุชู (PHP, Composer, Python).
2. ุงูุชูุงู ุณูุฑุณ ูพุฑูฺู ู ูุตุจ composer/npm.
3. ูพฺฉุฑุจูุฏ `.env` ู ุงุฌุฑุง ูุงฺฏุฑุดูโูุง.
4. ูุตุจ ูุงุจุณุชฺฏโูุง ูพุงุชูู ู ุงุฌุฑุง ุณุฑูุณ uvicorn.
5. ุซุจุช ุขุฏุฑุณ ุณุฑูุณ ุฏุฑ ุชูุธูุงุช ู ุชุณุช ุฏฺฉููู ยซุชุดุฎุต ููุดููุฏ ูุงฺฉุชูุฑยป.
6. ูพุงฺฉโุณุงุฒ ฺฉุดโูุง ู ูุงูุชูุฑูฺฏ ูุงฺฏโูุง.

> **ุงุฏุขูุฑ:** ูุฑ ุจุงุฑ ฺฉู ุชูุธูุงุช ุง ุณุฑูุณ ูพุงุชูู ุชุบุฑ ูโฺฉูุฏุ ุงุฒ ุทุฑู ุตูุญูู ุชูุธูุงุช ููุฏุงุฑ ุฌุฏุฏ ุฑุง ุฐุฎุฑู ฺฉุฑุฏู ู ฺฉ ุชุฑุงฺฉูุด ุขุฒูุงุด ุซุจุช ฺฉูุฏ ุชุง ุตุญุช ุฎุฑูุฌ ุชุฃุฏ ุดูุฏ.

---

## น. ุฑุงูููุง ฺฉุงูู ูุตุจ ู ุฑุงูโุงูุฏุงุฒ (ูุฑุฌุน ฺฉุงูู)

### ูุฑุญูู ฑ: ุจุฑุฑุณ ููุงุจุน ุณุฑูุฑ
```bash
# ุจุฑุฑุณ ุญุงูุธู ู ูุถุง ุฏุณฺฉ
free -h
df -h

# ุจุฑุฑุณ ูุฑุขูุฏูุง ุญุงูุธูโุจุฑ
ps aux --sort=-%mem | head -10
```

**โ๏ธ ูฺฉุชู ููู:** ุงฺฏุฑ ุญุงูุธู ุขุฒุงุฏ ฺฉูุชุฑ ุงุฒ 1GB ุจุงุดุฏุ ุงุจุชุฏุง ููุงุจุน ุณุฑูุฑ ุฑุง ุจููู ฺฉูุฏ.

### ูุฑุญูู ฒ: ูุตุจ ูพุดโูุงุฒูุง ุณุณุชู
```bash
# ุจูโุฑูุฒุฑุณุงู ุณุณุชู
sudo apt update && sudo apt upgrade -y

# ูุตุจ ูพฺฉุฌโูุง ููุฑุฏ ูุงุฒ
sudo apt install -y python3 python3-venv python3-pip ffmpeg libsm6 libxext6

# ูพุงฺฉโุณุงุฒ ฺฉุดโูุง ุณุณุชู
sudo apt clean && sudo apt autoremove -y
```

### ูุฑุญูู ณ: ุงุฌุงุฏ ูุญุท ูุฌุงุฒ ูพุงุชูู
```bash
# ุงุฌุงุฏ ูุญุท ูุฌุงุฒ
python3 -m venv /opt/pettycash-ai

# ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ
source /opt/pettycash-ai/bin/activate

# ุจูโุฑูุฒุฑุณุงู pip
pip install --upgrade pip
```

### ูุฑุญูู ด: ูุตุจ ูุงุจุณุชฺฏโูุง ูพุงุชูู
```bash
# ูุตุจ ุชูุงู ูุงุจุณุชฺฏโูุง
cd /var/www/zdr
pip install -r python/pettycash_ai/requirements.txt --no-cache-dir

# ูุตุจ ูุฌุฏุฏ ูพฺฉุฌโูุง ููู (ุฏุฑ ุตูุฑุช ูุงุฒ)
pip install --force-reinstall Pillow opencv-python easyocr uvicorn[standard]
```

### ูุฑุญูู ต: ุงุตูุงุญ ุชูุธูุงุช Pydantic (ุจุฑุง ูุณุฎู 2.x)
ูุงู `python/pettycash_ai/config.py` ุฑุง ูุฑุงุด ฺฉูุฏ:
```python
from pydantic_settings import BaseSettings  # ุชุบุฑ ุงุฒ pydantic
from pydantic import field_validator        # ุชุบุฑ ุงุฒ validator

class Settings(BaseSettings):
    # ... ุณุงุฑ ุชูุธูุงุช
    
    @field_validator("easyocr_languages", mode="before")  # ุชุบุฑ ุงุฒ @validator
    @classmethod
    def parse_languages(cls, value):
        if isinstance(value, str):
            return [item.strip() for item in value.split(",") if item.strip()]
        return value
```

### ูุฑุญูู ถ: ุงุฌุงุฏ ุณุฑูุณ systemd
ูุงู `/etc/systemd/system/pettycash-ai.service` ุฑุง ุงุฌุงุฏ ฺฉูุฏ:
```ini
[Unit]
Description=PettyCash Smart Invoice API
After=network.target

[Service]
User=root
Group=root
WorkingDirectory=/var/www/zdr
Environment="PATH=/opt/pettycash-ai/bin"
ExecStart=/opt/pettycash-ai/bin/uvicorn python.pettycash_ai.main:app --host 127.0.0.1 --port 8000 --workers 1 --limit-max-requests 100
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

### ูุฑุญูู ท: ุฑุงูโุงูุฏุงุฒ ุณุฑูุณ
```bash
# ุจุงุฑฺฏุฐุงุฑ ุชูุธูุงุช systemd
sudo systemctl daemon-reload

# ูุนุงูโุณุงุฒ ู ุดุฑูุน ุณุฑูุณ
sudo systemctl enable --now pettycash-ai

# ุจุฑุฑุณ ูุถุนุช ุณุฑูุณ
sudo systemctl status pettycash-ai
```

### ูุฑุญูู ธ: ุชุณุช ุณุฑูุณ
```bash
# ุชุณุช endpoint ุงุตู
curl -s -X POST http://127.0.0.1:8000/extract -H "Content-Type: application/json" -d '{"test": "data"}'

# ุชุณุช ูุณุชูุฏุงุช API
curl -s http://127.0.0.1:8000/docs
```

**โ ูพุงุณุฎ ููุฑุฏ ุงูุชุธุงุฑ:** `{"detail":"At least one file must be uploaded."}`

### ูุฑุญูู น: ุชูุธูุงุช Laravel Dashboard
1. ูุงุฑุฏ **Laravel Dashboard** ุดูุฏ
2. ุจู ูุณุฑ **ุชูุธูุงุช โ ูุงฺฉุชูุฑ ููุดููุฏ** ุจุฑูุฏ
3. ููุงุฏุฑ ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   - **Service base URL:** `http://127.0.0.1:8000`
   - **Service access token:** (ุฎุงู ุจฺฏุฐุงุฑุฏ)
   - **Timeout:** `60` ุซุงูู
   - **Analytics:** ูุนุงู ฺฉูุฏ
4. **ุฐุฎุฑู** ฺฉูุฏ

### ูุฑุญูู ฑฐ: ุชุณุช ููุง
1. ฺฉ ุฑุฏู ุชูุฎูุงู ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ
2. ุฑู ุฏฺฉูู **"ุชุดุฎุต ููุดููุฏ ูุงฺฉุชูุฑ"** ฺฉูฺฉ ฺฉูุฏ
3. ฺฉ ูุงู ุชุตูุฑ ูุงฺฉุชูุฑ ุขูพููุฏ ฺฉูุฏ
4. ููุชุธุฑ ูุชุฌู ูพุฑุฏุงุฒุด ุจุงุดุฏ

---

## ฑฐ. ุนุจโุงุจ ูพุดุฑูุชู

### ูุดฺฉู: `ModuleNotFoundError: No module named 'PIL'`
```bash
# ุฑุงูโุญู
source /opt/pettycash-ai/bin/activate
pip install --force-reinstall Pillow
systemctl restart pettycash-ai
```

### ูุดฺฉู: `cURL error 52: Empty reply from server`
```bash
# ุจุฑุฑุณ ูุถุนุช ุณุฑูุณ
systemctl status pettycash-ai

# ุจุฑุฑุณ ูุงฺฏโูุง
journalctl -u pettycash-ai -l

# ุฑุงูโุญู: ุฑโุงุณุชุงุฑุช ุณุฑูุณ
systemctl restart pettycash-ai
```

### ูุดฺฉู: ฺฉูุจูุฏ ููุงุจุน ุณุฑูุฑ
```bash
# ุจุฑุฑุณ ููุงุจุน
free -h
df -h

# ูพุงฺฉโุณุงุฒ ฺฉุดโูุง
sudo apt clean
sudo apt autoremove -y

# ุจูููโุณุงุฒ ุชูุธูุงุช uvicorn
# ุฏุฑ ูุงู systemd service:
# --workers 1 --limit-max-requests 100
```

---

## ฑฑ. ุฏุณุชูุฑุงุช ููุฏ ุจุฑุง ูฺฏูุฏุงุฑ

### ุจุฑุฑุณ ูุถุนุช ุณุฑูุณ
```bash
# ูุถุนุช ฺฉู
systemctl status pettycash-ai

# ูุงฺฏโูุง ุงุฎุฑ
journalctl -u pettycash-ai -l --since "1 hour ago"

# ูุตุฑู ุญุงูุธู
ps aux | grep uvicorn
```

### ุฑโุงุณุชุงุฑุช ุณุฑูุณ
```bash
# ุฑโุงุณุชุงุฑุช ุณุงุฏู
systemctl restart pettycash-ai

# ุฑโุงุณุชุงุฑุช ุจุง ุชููู ฺฉุงูู
systemctl stop pettycash-ai
sleep 5
systemctl start pettycash-ai
```

### ุจูโุฑูุฒุฑุณุงู ูุงุจุณุชฺฏโูุง
```bash
# ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ
source /opt/pettycash-ai/bin/activate

# ุจูโุฑูุฒุฑุณุงู pip
pip install --upgrade pip

# ุจูโุฑูุฒุฑุณุงู ูุงุจุณุชฺฏโูุง
pip install --upgrade -r python/pettycash_ai/requirements.txt

# ุฑโุงุณุชุงุฑุช ุณุฑูุณ
systemctl restart pettycash-ai
```

---

## ฑฒ. ฺฺฉโูุณุช ููุง ููููุช

- [ ] ููุงุจุน ุณุฑูุฑ ฺฉุงู (ุญุฏุงูู 1GB RAM ุขุฒุงุฏ)
- [ ] Python 3.10+ ูุตุจ ุดุฏู
- [ ] ูุญุท ูุฌุงุฒ `/opt/pettycash-ai` ุงุฌุงุฏ ุดุฏู
- [ ] ุชูุงู ูุงุจุณุชฺฏโูุง ูพุงุชูู ูุตุจ ุดุฏู
- [ ] ุชูุธูุงุช Pydantic ุงุตูุงุญ ุดุฏู
- [ ] ุณุฑูุณ systemd ุงุฌุงุฏ ู ูุนุงู ุดุฏู
- [ ] ุณุฑูุณ ุฏุฑ ุญุงู ุงุฌุฑุง (`active (running)`)
- [ ] endpoint `/extract` ูพุงุณุฎ ูโุฏูุฏ
- [ ] ุชูุธูุงุช Laravel Dashboard ุชฺฉูู ุดุฏู
- [ ] ุชุณุช "ุชุดุฎุต ููุดููุฏ ูุงฺฉุชูุฑ" ูููู ุงุณุช

---

## ฑณ. ูุชุฌู ููุง

โ **ุณุฑูุณ ูุงฺฉุชูุฑ ููุดููุฏ ุจุง ููููุช ุฑุงูโุงูุฏุงุฒ ุดุฏ!**

**ุขุฏุฑุณ ุณุฑูุณ:** `http://127.0.0.1:8000`
**ูุถุนุช:** `active (running)`
**ูุตุฑู ุญุงูุธู:** ~400MB (ุจูููโุดุฏู)
**ูพุงุฏุงุฑ:** ุฎูุฏฺฉุงุฑ ุฑโุงุณุชุงุฑุช ุฏุฑ ุตูุฑุช ุฎุทุง

**ูฺฉุงุช ููู:**
- ุณุฑูุณ ููุท ุฑู localhost ุฏุฑ ุฏุณุชุฑุณ ุงุณุช (ุงูู)
- ุชูุงู ูพุฑุฏุงุฒุดโูุง ูุญู ุงูุฌุงู ูโุดูุฏ
- ูุงฺฏโูุง ุฏุฑ `journalctl -u pettycash-ai` ูุงุจู ูุดุงูุฏู ุงุณุช
- ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ุฏุณุชุฑุณ ุฎุงุฑุฌุ ุงุฒ Nginx reverse proxy ุงุณุชูุงุฏู ฺฉูุฏ

ูููู ุจุงุดุฏ ๐ฑ
